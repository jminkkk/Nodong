## 웹을 지탱하는 기술

---

- 웹 개론
  - REST




#### REST

---



##### 웹 아키텍처 스타일

---

REST는 웹의 아키텍처 스타일이다.

아키텍처 스타일이란 '아키텍처 패턴'이라고도 하며, 복수의 아키텍처의 공통된 성질, 양식, 규정 혹은 독특한 방식을 가리키는 말이다.

아키텍처 스타일에은 MVC, Pipe and Filter 그리고 Event Sytem 등이 있다.



REST는 수많은 아키텍처 스타일 중에서도, 특히 네트워크 시스템의 아키텍처 스타일이다.

클라이언트/서버가 네트워크 시스템의 아키텍처이다.

REST뿐 아니라 웹 역시 클라이언트/서버이다.



사실 REST는 클라이언트 서버 구조에서 파생된 아키텍처 스타일이다.

순수한 클라이언트/서버 아키텍처 스타일에 몇 가지 제약을 더하면, REST라는 아키텍처 스타일이 된다.



그렇다면 아키텍처 스타일이란 무엇일까?

실제 시스템은 구체적인 아키텍처를 가지고 있다. 

그 아키텍처를 설계할 때의 설계 지침, 규정, 방식이 아키텍처 스타일이다.

즉 시스템의 아키텍처를 결정할 때 나침반이 되는 것이 아키텍처 스타일인 것이다.



아키텍처 스타일은 특정한 구현이나 아키텍처가 아니라는 점도 유의해야 한다.

구현에서 추상도를 한 단계 올린 것이 아키텍처이고, 아키텍처에서 추상도를 한 단계 더 올린 것이 아키텍처 스타일이다. 

이를 간단한 예시와 함께 보자.

| 추상화 레벨     | 웹에서의 예                             |
| --------------- | --------------------------------------- |
| 아키텍처 스타일 | REST                                    |
| 아키텍처        | 브라우저, 서버, 프록시, HTTP, URI, HTML |
| 구현            | Internet Explorer                       |



##### 리소스

---

REST에 있어 또 하나 중요한 개념으로 리소스가 있다.

리소스를 한마디로 설명하면, '웹상에 존재하는 이름을 가진 모든 정보'가 된다.



이러한 리소스의 이름이 URI이다.



예시를 한번 보자.

> 서울의 일기예보
>
> http://weather.naver.com/rgn/cityWetrWarea.nhn?cityRgnCd=CT001000



이러한 URI가 지니고 있는 리소스를 간단히 가리킬 수 있는 성질을 가리켜 'Addressability'라고 한다.



리소스는 이러한 URI를 여러 개 가질 수 있는데, 여러 개가 있으면 클라이언트가 리소스에 접근하기 쉬워지지만, 어느 것이 정식 URI인지 알기 힘들다는 결점도 동시에 가지게 된다.



리소스를 서버와 클라이언트 간에 실제로 주고 받을 때는 구체적인 데이터를 서로 통신한다.

이대 주고 받는 데이터를 'Resource Representation'이라 부른다.

하나의 리소스가 여러 표현을 가지고 있을 수 있으며, 리소스에는 '상태'라는 것이 있는데, 상태의 변화에 따라 리소스의 표현이 변하기도 한다.



##### REST 아키텍처 스타일

---

REST는 복수의 아키텍처 스타일을 조합하여 구축한 복합 아키텍처 스타일이다.

그 시작은 클라이언트/서버 스타일이다.

아래에서 이것을 포함 이것에 추가되는 아키텍처 스타일에 대해 알아보자.



###### 클라이언트/서버 (Client/Server)

웹은 HTTP라는 프로토콜을 이용해 클라이언트와 서버가 서로 통신하는 클라이언트/서버의 아키텍처 스타일을 채용하고 있다.

즉 클라이언트가 서버에 요청을 보내면, 서버는 클라이언트에게 대해 응답을 돌려준다.

클라이언트/서버의 이점은 단일 컴퓨터 상에서 모든 것을 처리하는 것이 아니라, 클라이언트와 서버로 분리하여 처리한다는 장점을 가지고 있다. 



###### 스테이트리스 서버 (Stateless Server)

스테이트리스란, 클라이언트의 애플리케이션 상태를 서버에서 관리하지 않는다는 것을 의미한다.

하지만 현실적으로는 스테이트리스가 아닌 웹 서비스와 웹 API가 많다.

특히 HTTP를 스테이트풀하게 만드는 것은 Cookie를 사용한 세션 관리이다.



###### 캐시 (cache)

---

캐시란, 한번 가져온 리소스를 클라이언트 쪽에서 돌려쓰는 방식이다.

캐시의 장점으로는 서버와 클라이언트 사시의 통신량을 줄여 네트워크 대역의 이용과 처리시간을 축소하고, 더욱 효율적으로 처리할 수 있다.



###### 유니폼 인터페이스 (uniform interface)

---

유니폼 인터페이스는 URI로 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행하는 아키텍처 스타일을 말한다.

예를 들어, HTTP 1.1에서는 GET과 POST등 8개의 메서드마 정의되어 있고, 보통은 이 이상 늘어나지 않는다.

인터페이스의 유연성에 제약을 가함으로써 전체적인 아키텍처가 간결해진다.

또한 인터페이스를 통일함으로써 클라이언트와 서버 구현의 중립성이 향상된다.

유니폼 인터페이스는 REST를 가장 특징짓는 아키텍처 스타일이다.



###### 계층화 시스템 (Layered System)

---

유니폼 인터페이스의 이점 가운데 하나로, 시스템 전체를 계층화하기 쉽다는 것이다.

예를 들면, 웹 서비스에서는 서버와 클라이언트 간의 로드 밸런서를 설치해 부하를 분산시키거나, 프록시를 설치해 액세스를 제어한다.

클라이언트 측에서 보면, 서버나 프록시 모두 동일한 인터페이스로 접속할 수 있기 때문에 접속할 곳이 서버에서 프록시로 바뀐 것은 신경 쓸 필요가 없다.

이는 서버와 프록시 등 각 컴포넌트간의 인터페이스를 HTTP로 통일하고 있기에 실현될 수 있다.



###### 코드 온 디맨드 (Code on Demand)

---

코드 온 디맨드는 프로그램 코드를 서버에서 다운받아 클라이언트에서 실행하는 아키텍처 스타일이다.

코드온 디멘드의 장점은 클라이언트를 차후에 확장할 수 있다는 것이다.



이러한 다양한 아키텍처 스타일이 추가된 클라이언트/서버 아키텍처는 'ULCODC$SS' 즉 REST가 되는 것이다. 

즉 REST는 위의 6가지를 조합한 아키텍처 스타일을 가리키는 것이다.



REST는 아키텍처 스타일로 실제로 시스템을 설계할 때는 그 시스템의 아키텍처를 만들어야 한다.

REST에 기초한 아키텍처를 구축할 경우라도 REST를 구성하는 스타일 중 몇 가지를 제외하더라도 상관없다.

예를 들어, 쿠키 정보 등을 통해 세션에 값을 저장하도록 하여 스테이트풀 하지만, URI 형식 등은 REST의 제약에 따르는 아키텍처가 있다.



##### REST와 하이퍼미디어

---

우리는 '웹상의 리소스들이 가지는 링크를 따라가는' 작업을 한다.

웹이 가진 이 특징을 REST에서는 애플리케이션 상태 엔진으로서의 하이퍼미디어라고 한다.

애플리케이션 상태는 하이퍼미디어의 링크를 따라가는 작업에 의해 변화한다.

이것이 하이퍼미디어가 애플리케이션의 상태 엔진이라 불리는 이유다.



이러한 리소스를 링크로 연결하여 하나으 ㅣ애플리케이션을 구성한다는 개념은 REST의 근간을 이루는 사상이며 이를 '접속성'이라 부른다.



##### REST와 분산 시스템

---

REST에 기초한 웹 서비스에서는 링크를 이용하여 애플리케이션을 실현한다.



RPC와 분산 오브젝트는 서버마다 다른 인터페이스를 가지며, 개별 인터페이스는 프로그램 라이브러리의 인터페이스를 기반으로 개발하는 경우가 많다. 

라이브러리에 좋다는 인터페이스는 네트워크로 호출하기 지나치게 작은 입도이다.



리소스는 그 자체로 의미를 가진 하나의 데이터이며, RPC 함수에 의해 주고 받는 데이터보다 입도가 크다.

그러므로 링크를 따라 애플리케이션의 상태를 변화시키는 편이 전체적인 성능 저하를 억제할 수 있다.



그리고 RPC와 분산 오브젝트는 버전이 바뀌면 메서드가 늘어나가너 메서드의 인수와 반환값이 바뀌어 API 호환성이 상실된다. 

하지만 REST에 기초한 웹에서는 유니폼 인터페이스에 의해 인터페이스가 고정되어 있어 호환성 문제는 일어나지 않는다.





