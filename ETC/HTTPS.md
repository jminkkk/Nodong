# HTTPS

- HTTPS
  - SSL
  - SSO




## HTTPS

---

HTTPSλ” HTTPμ™€ κΈ°λ³Έ κ³¨κ²©μ΄λ‚ μ‚¬μ© λ©μ  λ“±μ€ κ±°μ λ™μΌν•λ‹¤.

ν•μ§€λ§ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›λ” κ³Όμ •μ—μ„ 'λ³΄μ•' μ”μ†κ°€ μ¶”κ°€λ κ²ƒμ΄ κ°€μ¥ ν° μ°¨μ΄μ΄λ‹¤.

HTTPSλ¥Ό μ‚¬μ©ν•λ©΄ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ μ‚¬μ΄μ λ¨λ“  ν†µμ‹  λ‚΄μ©μ΄ μ•”νΈν™”λλ‹¤.

HTTPSλ” SSLμ΄λ‚ TLS ν”„λ΅ν† μ½μ„ ν†µν•΄ μ„Έμ… λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•λ©°, κΈ°λ³Έ TCP/IP ν¬νΈλ” 443μ΄κ³ , SSL ν”„λ΅ν† μ½ μ„μ—μ„ HTTPS ν”„λ΅ν† μ½μ΄ λ™μ‘ν•λ‹¤.



### μ•”νΈν™” λ°©μ‹

---



#### λ€μΉ­ν‚¤ λ°©μ‹

---

λ€μΉ­ν‚¤λ” λ™μΌν• ν‚¤λ΅ μ•”νΈν™”μ™€ λ³µνΈν™”λ¥Ό κ°™μ΄ ν•  μ μλ” λ°©μ‹μ μ•”νΈν™” κΈ°λ²•μ΄λ‹¤.

μ¦‰ μ•”νΈν™”λ¥Ό ν•  λ• 1234λΌλ” κ°’μ„ μ‚¬μ©ν–λ‹¤λ©΄ λ³µνΈν™”λ¥Ό ν•  λ• 1234λΌλ” κ°’μ„ μ…λ ¥ν•΄μ•Ό ν•λ‹¤. 



λ€μΉ­ν‚¤ λ°©μ‹μ€ λ‹¨μ μ΄ μλ‹¤. 

μ•”νΈλ¥Ό μ£Όκ³  λ°›λ” μ‚¬λλ“¤ μ‚¬μ΄μ— λ€μΉ­ν‚¤λ¥Ό μ „λ‹¬ν•λ” κ²ƒμ΄ μ–΄λ µλ‹¤λ” μ μ΄λ‹¤. 

λ€μΉ­ν‚¤κ°€ μ μ¶λλ©΄ ν‚¤λ¥Ό νλ“ν• κ³µκ²©μλ” μ•”νΈμ λ‚΄μ©μ„ λ³µνΈν™” ν•  μ μκΈ° λ•λ¬Έμ— μ•”νΈκ°€ λ¬΄μ©μ§€λ¬Όμ΄ λκΈ° λ•λ¬Έμ΄λ‹¤.



#### κ³µκ°ν‚¤ λ°©μ‹

---

μ„μ™€ κ°™μ€ λ‹¨μ  λ•λ¬Έμ— λ‚μ¨ μ•”νΈν™” λ°©μ‹μ΄ κ³µκ°ν‚¤ λ°©μ‹μ΄λ‹¤.



κ³µκ°ν‚¤ λ°©μ‹μ€ 2κ°μ ν‚¤λ¥Ό κ°–κ² λλ‹¤.

Aν‚¤λ¥Ό μ•”νΈν™”ν•λ©΄ Bν‚¤λ΅ λ³µνΈν™”ν•  μ μκ³ , Bν‚¤λ΅ μ•”νΈν™”ν•λ©΄ Aν‚¤λ΅ λ³µνΈν™”ν•  μ μλ” λ°©μ‹μ΄λ‹¤.

2κ°μ ν‚¤ μ¤‘ ν•λ‚λ¥Ό λΉ„κ³µκ°ν‚¤λΌ ν•κ³  λ‚λ¨Έμ§€λ¥Ό κ³µκ°ν‚¤λ΅ μ§€μ •ν•λ‹¤.

λΉ„κ³µκ°ν‚¤λ” μμ‹ λ§μ΄ κ°€μ§€κ³  μκ³ , κ³µκ°ν‚¤λ¥Ό νƒ€μΈμ— μ κ³µν•λ‹¤.

κ³µκ°ν‚¤λ¥Ό λ°›μ€ νƒ€μΈμ€ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μ •λ³΄λ¥Ό μ•”νΈν™” ν•λ‹¤.

κ·Έλ ‡κ² λλ©΄ λΉ„κ³µκ°ν‚¤λ¥Ό κ°€μ§€κ³  μλ” μ†μ μλ§μ΄ μ•”νΈν™”λ μ •λ³΄λ¥Ό λ³µνΈν™”ν•  μ μλ” κ²ƒμ΄λ‹¤.

κ·Έλ ‡κΈ°μ— κ³µκ°ν‚¤κ°€ μ μ¶λλ‹¤κ³ ν•΄λ„ λΉ„κ³µκ°ν‚¤λ¥Ό λ¨λ¥΄λ©΄ λ³µνΈν™”ν•  μ μ—†μ–΄ μ•μ „ν•λ‹¤.



<details>
<summary>κ³µκ°ν‚¤ μ‘μ© μ‚¬λ΅€ "μ „μ μ„λ…"</summary>
μ΄ λ°©μ‹μ€ λ‹¤μκ³Ό κ°™μ΄ μ‘μ©ν•  μλ„ μλ‹¤.<br>
λΉ„κ³µκ°ν‚¤ μ†μ μκ°€ λΉ„κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄ μ •λ³΄λ¥Ό μ•”νΈν™” ν• ν›„ κ³µκ°ν‚¤μ™€ ν•¨κ» μ•”νΈν™” λ μ •λ³΄λ¥Ό μ „μ†΅ν•λ‹¤.<br>
μ •λ³΄μ™€ κ³µκ°ν‚¤λ¥Ό λ°›μ€ μ‚¬λμ€ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μ•”νΈν™”λ μ •λ³΄λ¥Ό λ³µνΈν™” ν•λ‹¤.<br>
μ΄ κ³Όμ •μ—μ„ κ³µκ°ν‚¤κ°€ μ μ¶λλ‹¤λ©΄ μλ„μΉ μ•μ€ κ³µκ²©μμ— μν•΄μ„ λ°μ΄ν„°κ°€ λ³µνΈν™” λ  μ„ν—μ΄ μλ‹¤.<br>
μ΄λ° μ„ν—μ—λ„ λΉ„κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μ•”νΈν™”ν•λ” μ΄μ λ” λ°μ΄ν„°λ¥Ό λ³΄νΈν•λ” κ²ƒμ΄ λ©μ μ΄ μ•„λ‹κΈ° λ•λ¬Έμ΄λ‹¤.<br>
μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό κ³µκ°ν‚¤λ¥Ό κ°€μ§€κ³  λ³µνΈν™”ν•  μ μλ” κ²ƒμ€ κ·Έ λ°μ΄ν„°κ°€ κ³µκ°ν‚¤μ™€ μμ„ μ΄λ£¨λ” λΉ„κ³µκ°ν‚¤μ— μν•΄μ„ μ•”νΈν™” λμ—λ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤.<br>
μ¦‰ κ³µκ°ν‚¤κ°€ λ°μ΄ν„°λ¥Ό μ κ³µν• μ‚¬λμ μ‹ μ›μ„ λ³΄μ¥ν•΄ μ£Όλ” κ²ƒμ΄λ‹¤.<br>
μ΄λ¥Ό μ „μ μ„λ…μ΄λΌ ν•λ‹¤.<br>
</details>




### SSL μΈμ¦μ„

----

SSL μΈμ¦μ„λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°„μ— ν†µμ‹ μ„ μ  3μκ°€ λ³΄μ¦ν•΄μ£Όλ” μ „μν™”λ λ¬Έμ„μ΄λ‹¤.

ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ†ν• μ§ν›„μ—λ” μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ—κ² μ΄ μΈμ¦μ„ μ •λ³΄λ¥Ό μ „λ‹¬ν•λ‹¤.

ν΄λΌμ΄μ–ΈνΈλ” μ΄ μΈμ¦μ„ μ •λ³΄κ°€ μ‹ λΆ°ν•  μ μλ” κ²ƒμΈμ§€ κ²€μ¦ν• ν›„μ— λ‹¤μ μ μ°¨λ¥Ό μν–‰ν•λ‹¤.

![img](https://t1.daumcdn.net/cfile/tistory/2171D643590C3F380B)



#### SSL μΈμ¦μ„μ μ—­ν• 

---

- ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ μ‹ λΆ°ν•  μ μλ” μ„λ²„μ„μ„ λ³΄μ¥ν•λ‹¤.
- SSL ν†µμ‹ μ— μ‚¬μ©ν•  κ³µκ°ν‚¤λ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ κ³µν•λ‹¤.



#### CA

---

μΈμ¦μ„μ μ—­ν• μ€ ν΄λΌμ΄μ–ΈνΈκ°€ μ ‘μ†ν• μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈκ°€ μλ„ν• μ„λ²„κ°€ λ§λ”μ§€λ¥Ό λ³΄μ¥ν•λ” μ—­ν™μ΄λ‹¤.

SSLμ„ ν†µν•΄μ„ μ•”νΈν™”λ ν†µμ‹ μ„ μ κ³µν•λ ¤λ” μ„λΉ„μ¤λ” CAλ¥Ό ν†µν•΄μ„ μΈμ¦μ„λ¥Ό κµ¬μ…ν•΄μ•Ό ν•λ‹¤.



#### SSL μΈμ¦μ„μ λ‚΄μ©

---

SSL μΈμ¦μ„μ—λ” λ‹¤μκ³Ό κ°™μ€ μ •λ³΄κ°€ ν¬ν•¨λμ–΄ μλ‹¤.

- μ„λΉ„μ¤μ μ •λ³΄ (μΈμ¦μ„λ¥Ό λ°κΈ‰ν• CA, μ„λΉ„μ¤μ λ„λ©”μΈ λ“±λ“±)
- μ„λ²„ μΈ΅ κ³µκ°ν‚¤ (κ³µκ°ν‚¤μ λ‚΄μ©, κ³µκ°ν‚¤μ μ•”νΈν™” λ°©λ²•)



μ„μ™€ κ°™μ€ λ‚΄μ©μ€ CAμ— μν•΄ ν•¨νΈν™” λλ‹¤. 

μ΄ λ• μ‚¬μ©ν•λ” μ•”νΈν™” κΈ°λ²•μ΄ κ³µκ°ν‚¤ λ°©μ‹μ΄λ‹¤.

CAλ” μμ‹ μ CA κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μ„λ²„κ°€ μ μ¶ν• μΈμ¦μ„λ¥Ό μ•”νΈν™”ν•λ” κ²ƒμ΄λ‹¤.

κ·Έλ ‡κΈ°μ— CAμ λΉ„κ³µκ°ν‚¤λ” μ λ€λ΅ μ μ¶λμ„λ” μ•λλ‹¤.



μΈμ¦μ„λ¥Ό μ΄ν•΄ν•λ”λ° κΌ­ μ•κ³  μμ–΄μ•Ό ν•λ” κ²ƒμ΄ CAμ λ¦¬μ¤νΈμ΄λ‹¤.

λΈλΌμ°μ €λ” λ‚΄λ¶€μ μΌλ΅ CAμ λ¦¬μ¤νΈλ¥Ό λ―Έλ¦¬ νμ•…ν•κ³  μλ‹¤.

λΈλΌμ°μ €μ μ†μ¤μ½”λ“ μ•μ— CAμ λ¦¬μ¤νΈκ°€ λ“¤μ–΄μλ” κ²ƒμ΄λ‹¤.

λΈλΌμ°μ €κ°€ λ―Έλ¦¬ νμ•…ν•κ³  μλ” CAμ λ¦¬μ¤νΈμ— ν¬ν•¨λμ–΄μ•Όλ§ κ³µμΈλ CAκ°€ λ  μ μλ” κ²ƒμ΄λ‹¤. 

CAμ λ¦¬μ¤νΈμ™€ κ° CAμ κ³µκ°ν‚¤λ¥Ό λΈλΌμ°μ €λ” μ΄λ―Έ μ•κ³  μλ‹¤.



#### SSL μΈμ¦μ„κ°€ μ„λΉ„μ¤λ¥Ό λ³΄μ¦ν•λ” λ°©λ²•

---

μ›Ή λΈλΌμ°μ €κ°€ μ„λ²„μ— μ ‘μ†ν•  λ• μ„λ²„λ” μ μΌ λ¨Όμ € μΈμ¦μ„λ¥Ό μ κ³µν•λ‹¤.

λΈλΌμ°μ €λ” μ΄ μΈμ¦μ„λ¥Ό λ°κΈ‰ν• CAκ°€ μμ‹ μ΄ λ‚΄μ¥ν• CAμ λ¦¬μ¤νΈμ— μλ”μ§€ ν™•μΈν•λ‹¤.

CA λ¦¬μ¤νΈμ— ν¬ν•¨λμ–΄ μλ‹¤λ©΄ ν•΄λ‹Ή CAμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μΈμ¦μ„λ¥Ό λ³µνΈν™”ν•λ‹¤.

CAμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μΈμ¦μ„λ¥Ό λ³µνΈν™” ν•  μ μλ‹¤λ” κ²ƒμ€ μ΄ μΈμ¦μ„κ°€ CAμ λΉ„κ³µκ°ν‚¤μ— μν•΄μ„ μ•”νΈν™” λ κ²ƒμ„ μλ―Έν•λ‹¤.

ν•΄λ‹Ή CAμ λΉ„κ³µκ° ν‚¤λ¥Ό κ°€μ§€κ³  μλ” CAλ” ν•΄λ‹Ή CA λ°–μ— μ—†κΈ° λ•λ¬Έμ— μ„λ²„κ°€ μ κ³µν• μΈμ¦μ„κ°€ CAμ— μν•΄μ„ λ°κΈ‰λ κ²ƒμ΄λΌλ” κ²ƒμ„ μλ―Έν•λ‹¤.



### SSLμ λ™μ‘λ°©λ²•

---

SSLμ€ μ•”νΈν™”λ λ°μ΄ν„°λ¥Ό μ „μ†΅ν•κΈ° μ„ν•΄μ„ κ³µκ°ν‚¤μ™€ λ€μΉ­ν‚¤λ¥Ό νΌν•©ν•΄μ„ μ‚¬μ©ν•λ‹¤.

μ¦‰ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ£Όκ³ λ°›λ” μ‹¤μ  μ •λ³΄λ” λ€μΉ­ν‚¤ λ°©μ‹κΈλ΅ μ•”νΈν™”ν•κ³ , λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ μ•”νΈν™”λ μ‹¤μ  μ •λ³΄λ¥Ό λ³µνΈν™”ν•  λ• μ‚¬μ©ν•  λ€μΉ­ν‚¤λ” κ³µκ°ν‚¤ λ°©μ‹μΌλ΅ μ•”νΈν™”ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ£Όκ³  λ°›κ² λλ‹¤.



μ»΄ν“¨ν„°μ™€ μ»΄ν“¨ν„°κ°€ λ„¤νΈμ›ν¬λ¥Ό μ΄μ©ν•΄μ„ ν†µμ‹  ν• λ•λ” "μ•…μ => μ „μ†΅ => μ„Έμ…μΆ…λ£" 3κ°€μ§€ λ‹¨κ³„κ°€ μλ‹¤.



#### μ•…μ(handshake)

---

SSL λ°©μ‹μ„ μ΄μ©ν•΄μ„ ν†µμ‹ μ„ ν•λ” λΈλΌμ°μ €μ™€ μ„λ²„λ” μ—­μ‹ ν•Έλ“μ‰μ΄ν¬λ¥Ό ν•λ”λ°, μ΄ λ• SSL μΈμ¦μ„λ¥Ό μ£Όκ³  λ°›κ²λλ‹¤. 

μΈμ¦μ„μ— ν¬ν•¨λ μ„λ²„ μΈ΅ κ³µκ°ν‚¤μ μ—­ν™μ€ λ¬΄μ—‡μΌκΉ?



μΌλ‹¨ κ³µκ°ν‚¤λ” μ΄μƒμ μΈ ν†µμ‹  λ°©λ²•μ΄λ‹¤. 

μ•”νΈν™”μ™€ λ³µνΈν™”λ¥Ό ν•  λ• μ‚¬μ©ν•λ” ν‚¤κ°€ μ„λ΅ λ‹¤λ¥΄κΈ° λ•λ¬Έμ— λ©”μ‹μ§€λ¥Ό μ „μ†΅ν•λ” μ½μ΄ κ³µκ°ν‚¤λ΅ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•κ³ , μμ‹  λ°›λ” μ½μ΄ λΉ„κ³µκ°ν‚¤λ΅ λ°μ΄ν„°λ¥Ό λ³µνΈν™”ν•λ©΄ λκΈ° λ•λ¬Έμ΄λ‹¤.

κ·Έλ°λ° SSLμ—μ„λ” μ΄ λ°©μ‹μ„ μ‚¬μ©ν•μ§€ μ•λ”λ‹¤.

μ™λƒν•λ©΄ κ³µκ°ν‚¤ λ°©μ‹μ μ•”νΈν™”λ” λ§¤μ° λ§μ€ μ»΄ν“¨ν„° μμ›μ„ μ‚¬μ©ν•κΈ° λ•λ¬Έμ΄λ‹¤.

λ°λ©΄ λ€μΉ­ν‚¤ λ°©μ‹μ€ μ μ€ μ»΄ν“¨ν„° μμ›μΌλ΅ μ•”νΈν™”λ¥Ό μν–‰ν•  μ μκΈ° λ•λ¬Έμ— ν¨μ¨μ μ΄μ§€λ§ μμ‹ μΈ΅κ³Ό μ†΅μ‹ μΈ΅μ΄ λ™μΌν• ν‚¤λ¥Ό κ³µμ ν•΄μ•Ό ν•κΈ° λ•λ¬Έμ— λ³΄μ•μ λ¬Έμ κ°€ λ°μƒν•λ‹¤.



κ·Έλμ„ SSLμ€ κ³µκ°ν‚¤μ™€ λ€μΉ­ν‚¤μ μ¥μ μ„ νΌν•©ν• λ°©μ‹μ„ μ‚¬μ©ν•λ‹¤.

ν—¨λ“μ‰μ΄ν¬ λ‹¨κ³„μ—μ„ ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ ν†µμ‹ ν•λ” κ³Όμ •μ„ μμ„λ€λ΅ μ‚΄ν΄λ³΄μ.



1. ν΄λΌμ΄μ–ΈνΈκ°€ μ„λ²„μ— μ ‘μ†ν•λ‹¤. (Client Hello)
   **ν΄λΌμ΄μ–ΈνΈ μΈ΅μ—μ„ μƒμ„±ν• λλ¤ λ°μ΄ν„°**
   **ν΄λΌμ΄μ–ΈνΈκ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹λ“¤** : ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ μ§€μ›ν•λ” μ•”νΈν™” λ°©μ‹μ΄ μ„λ΅ λ‹¤λ¥Ό μ μκΈ° λ•λ¬Έμ— μƒνΈκ°„μ— μ–΄λ–¤ μ•”νΈν™” λ°©μ‹μ„ μ‚¬μ©ν•  κ²ƒμΈμ§€μ— λ€ν•΄ ν‘μƒμ„ ν•λ‹¤. μ΄ ν‘μƒμ„ μ„ν•΄μ„ ν΄λΌμ΄μ–ΈνΈλ” μμ‹ μ΄ μ‚¬μ©ν•  μ μλ” μ•”νΈν™” λ°©μ‹μ„ μ „μ†΅ν•λ‹¤.
   **μ„Έμ… μ•„μ΄λ””** : μ΄λ―Έ SSL ν•Έλ“μ‰μ΄ν‚Ήμ„ ν–λ‹¤λ©΄ λΉ„μ©κ³Ό μ‹κ°„μ„ μ μ•½ν•κΈ° μ„ν•΄μ„ κΈ°μ΅΄μ μ„Έμ…μ„ μ¬ν™μ©ν•κ² λλ”λ° μ΄λ• μ‚¬μ©ν•  μ—°κ²°μ— λ€ν• μ‹λ³„μλ¥Ό μ„λ²„ μΈ΅μΌλ΅ μ „μ†΅ν•λ‹¤.
2. μ„λ²„λ” Client Helloμ— λ€ν• μ‘λ‹µμΌλ΅ Server Helloλ¥Ό ν•κ² λλ‹¤. 
   **μ„λ²„ μΈ΅μ—μ„ μƒμ„±ν• λλ¤ λ°μ΄ν„°**
   **μ„λ²„κ°€ μ„ νƒν• ν΄λΌμ΄μ–ΈνΈμ μ•”νΈν™” λ°©μ‹** : ν΄λΌμ΄μ–ΈνΈκ°€ μ „λ‹¬ν• μ•”νΈν™” λ°©μ‹ μ¤‘μ—μ„ μ„λ²„ μ½μ—μ„λ„ μ‚¬μ©ν•  μ μλ” μ•”νΈν™” λ°©μ‹μ„ μ„ νƒν•΄μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬ν•λ‹¤. μ΄λ΅μ¨ μ•”νΈν™” λ°©μ‹μ— λ€ν• ν‘μƒμ΄ μΆ…λ£λκ³  μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” μ΄ μ•”νΈν™” λ°©μ‹μ„ μ΄μ©ν•΄μ„ μ •λ³΄λ¥Ό κµν™ν•λ‹¤.
   **μΈμ¦μ„**
3. ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ μΈμ¦μ„κ°€ CAμ— μν•΄μ„ λ°κΈ‰λ κ²ƒμΈμ§€λ¥Ό ν™•μΈν•κΈ° μ„ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ— λ‚΄μ¥λ CA λ¦¬μ¤νΈλ¥Ό ν™•μΈν•λ‹¤. CA λ¦¬μ¤νΈμ— μΈμ¦μ„κ°€ μ—†λ‹¤λ©΄ μ‚¬μ©μμ—κ² κ²½κ³  λ©”μ‹μ§€λ¥Ό μ¶λ ¥ν•λ‹¤. μΈμ¦μ„κ°€ CAμ— μν•΄μ„ λ°κΈ‰λ κ²ƒμΈμ§€ ν™•μΈν•κΈ° μ„ν•΄μ„ ν΄λΌμ΄μ–ΈνΈμ— λ‚΄μ¥λ CAμ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ μΈμ¦μ„λ¥Ό λ³µνΈν™” ν•λ‹¤. λ³µνΈν™”μ— μ„±κ³µν–λ‹¤λ©΄ μΈμ¦μ„λ” CAμ κ°μΈν‚¤λ΅ μ•”νΈν™”λ λ¬Έμ„μ„μ΄ μ•”μ‹μ μΌλ΅ λ³΄μ¦λ κ²ƒμ΄λ‹¤. 



μ΄λ¬ν• μ μ°¨λ΅ μΈμ¦μ„λ¥Ό μ „μ†΅ν• μ„λ²„λ¥Ό μ‹ λΆ°ν•  μ μκ² λλ‹¤.



ν΄λΌμ΄μ–ΈνΈλ” 2λ² λ‹¨κ³„λ¥Ό ν†µν•΄μ„ λ°›μ€ μ„λ²„μ λλ¤ λ°μ΄ν„°μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ μƒμ„±ν• λλ¤ λ°μ΄ν„°λ¥Ό μ΅°ν•©ν•΄μ„ pre master secret μ΄λΌλ” ν‚¤λ¥Ό μƒμ„±ν•κ² λλ‹¤. 

μ΄ ν‚¤λ” μ„Έμ… λ‹¨κ³„μ—μ„ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›μ„ λ• μ•”νΈν™”ν•κΈ° μ„ν•΄μ„ μ‚¬μ©λλ‹¤.

μ΄ λ• μ‚¬μ©ν•  μ•”νΈν™” κΈ°λ²•μ€ λ€μΉ­ν‚¤μ΄κΈ° λ•λ¬Έμ— pre master secret κ°’μ€ μ  3μμ—κ² λ…Έμ¶ λμ–΄μ„λ” μ•λλ‹¤.



μ΄ pre master secret κ°’μ€ κ³µκ°ν‚¤ λ°©μ‹μΌλ΅ μ„λ²„μ— μ „λ‹¬λλ‹¤.

μ„λ²„μ κ³µκ°ν‚¤λ΅ pre master secret κ°’μ„ μ•”νΈν™”ν•΄μ„ μ„λ²„λ΅ μ „μ†΅ν•λ©΄ μ„λ²„λ” μμ‹ μ λΉ„κ³µκ°ν‚¤λ΅ μ•μ „ν•κ² λ³µνΈν™” ν•λ‹¤.

ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„λ΅λ¶€ν„° λ°›μ€ μΈμ¦μ„ μ•μ— μ„λ²„μ κ³µκ°ν‚¤κ°€ μκΈ° λ•λ¬Έμ— μ΄ κ³µκ°ν‚¤λ¥Ό μ΄μ©ν•΄μ„ pre master secret κ°’μ„ μ•”νΈν™”ν• ν›„μ— μ„λ²„λ΅ μ „μ†΅ν•λ©΄ μ•μ „ν•κ² μ „μ†΅ν•  μ μλ‹¤. 



4.  μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ „μ†΅ν• pre master secret κ°’μ„ μμ‹ μ λΉ„κ³µκ°ν‚¤λ΅ λ³µνΈν™”ν•λ‹¤. μ΄λ΅μ¨ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘ pre master secret κ°’μ„ κ³µμ ν•κ² λλ‹¤. κ·Έλ¦¬κ³  μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” λ¨λ‘ μΌλ ¨μ κ³Όμ •μ„ κ±°μ³μ„ pre master secret κ°’μ„ master secret κ°’μΌλ΅ λ§λ“ λ‹¤. master secretμ€ session keyλ¥Ό μƒμ„±ν•λ”λ° μ΄ session key κ°’μ„ μ΄μ©ν•΄μ„ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈλ” λ°μ΄ν„°λ¥Ό λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ μ•”νΈν™”ν• ν›„μ— μ£Όκ³  λ°›κ² λλ‹¤. μ΄λ ‡κ²ν•΄μ„ μ„Έμ…ν‚¤λ¥Ό ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„κ°€ λ¨λ‘ κ³µμ ν•κ² λλ‹¤.
5.  ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” ν•Έλ“μ‰μ΄ν¬ λ‹¨κ³„μ μΆ…λ£λ¥Ό μ„λ΅μ—κ² μ•λ¦°λ‹¤.



#### μ„Έμ…

---

μ„Έμ…μ€ μ‹¤μ λ΅ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ λ°μ΄ν„°λ¥Ό μ£Όκ³  λ°›λ” λ‹¨κ³„μ΄λ‹¤. 

μ΄ λ‹¨κ³„μ ν•µμ‹¬μ€ μ •λ³΄λ¥Ό μƒλ€λ°©μ—κ² μ „μ†΅ν•κΈ° μ „μ— session key κ°’μ„ μ΄μ”ν•΄μ„ λ€μΉ­ν‚¤ λ°©μ‹μΌλ΅ μ•”νΈν™” ν•λ‹¤λ” μ μ΄λ‹¤.

μ•”νΈν™”λ μ •λ³΄λ” μƒλ€λ°©μ—κ² μ „μ†΅λ  κ²ƒμ΄κ³ , μƒλ€λ°©λ„ μ„Έμ…ν‚¤ κ°’μ„ μ•κ³  μμ–΄ μ•”νΈλ¥Ό λ³µνΈν™” ν•  μ μλ‹¤.



#### μ„Έμ… μΆ…λ£

---

λ°μ΄ν„°μ μ „μ†΅μ΄ λλ‚λ©΄ SSL ν†µμ‹ μ΄ λλ‚¬μμ„ μ„λ΅μ—κ² μ•λ ¤μ¤€λ‹¤. μ΄ λ• ν†µμ‹ μ—μ„ μ‚¬μ©ν• λ€μΉ­ν‚¤μΈ μ„Έμ…ν‚¤λ¥Ό νκΈ°ν•κ² λλ‹¤.



<details>
<summary>μ°Έκ³ </summary>
<a href=https://12bme.tistory.com/80>https://12bme.tistory.com/80</a>
</details>



### SSO

---

SSOλ” Single Sign Onμ μ•½μμ΄λ‹¤.

μ΄λ” μ—¬λ¬ μ„λΉ„μ¤λ¥Ό 'λ΅κ·ΈμΈ ν• λ²'μΌλ΅ μ΄μ©ν•λ„λ΅ ν•λ” κΈ°μ μ΄λ‹¤.



#### μ¥λ‹¨μ 

---

- μ¥μ 
  - ID/Password κ°λ³„ κ΄€λ¦¬μ μ„ν—μ„± ν•΄μ†
  - μ‚¬μ©μ νΈμμ„± μ¦κ°€
- λ‹¨μ  
  - κµ¬μ¶• λΉ„μ©μ΄ λΉ„μ‹Έκ³  μ‹μ¤ν… λ³µμ΅λ„ μ¦κ°€
  - Single Point of Failure



#### κµ¬ν„ λ°©μ‹

---



##### μ„μ„λ°©μ‹

---

SSO μ—μ΄μ „νΈκ°€ μΈμ¦μ„ λ€ν–‰ν•λ” λ°©μ‹

![SSO μ„μ„ λ°©μ‹ κµ¬μ΅°λ„.jpg](https://itwiki.kr/images/thumb/7/7f/SSO_%EC%9C%84%EC%9E%84_%EB%B0%A9%EC%8B%9D_%EA%B5%AC%EC%A1%B0%EB%8F%84.jpg/500px-SSO_%EC%9C%84%EC%9E%84_%EB%B0%A9%EC%8B%9D_%EA%B5%AC%EC%A1%B0%EB%8F%84.jpg)

λ€μƒ μ• ν”λ¦¬μΌ€μ΄μ…μ μΈμ¦ λ°©μ‹μ„ λ³€κ²½ν•κΈ° μ–΄λ ¤μΈ λ• λ§μ΄ μ‚¬μ©

μ‚¬μ©μμ μΈμ¦ μ •λ³΄λ¥Ό SSO μ—μ΄μ „νΈκ°€ κ΄€λ¦¬ν•λ©° λ΅κ·ΈμΈ λ€μ‹  μν–‰



#### μ „νλ°©μ‹

---

SSOμ—μ„ μΈμ¦μ„ μν–‰ν•κ³ , ν† ν° λ°κΈ‰ν•κ³  μ „λ‹¬ν•μ—¬ μΈμ¦ μν–‰

![SSO μ „ν λ°©μ‹ κµ¬μ΅°λ„.jpg](https://itwiki.kr/images/thumb/8/80/SSO_%EC%A0%84%ED%8C%8C_%EB%B0%A9%EC%8B%9D_%EA%B5%AC%EC%A1%B0%EB%8F%84.jpg/500px-SSO_%EC%A0%84%ED%8C%8C_%EB%B0%A9%EC%8B%9D_%EA%B5%AC%EC%A1%B0%EB%8F%84.jpg)

SSOμ—μ„ μΈμ¦μ„ λ°›μ•„ λ€μƒ μ• ν”λ¦¬μΌ€μ΄μ…μΌλ΅ μ „λ‹¬ν•  ν† ν° μƒμ„±

μ• ν”λ¦¬μΌ€μ΄μ…μ—μ„  SSOμ ν† ν°μ„ κ²€μ¦ν•κ³  μΈμ¦λ κ²ƒμΌλ΅ μ²λ¦¬



#### κµ¬ν„

---



##### μ›Ή κΈ°λ° SSO

---

- μ „ν λ°©μ‹μ κ²½μ° μΏ ν‚¤λ¥Ό ν†µν•΄ ν† ν°μ„ μ €μ¥ν•λ‹¤.
  - ν† ν° μΏ ν‚¤κ°€ μμ„ κ²½μ° ν† ν°κ°’μ„ κ²€μ¦ν•΄ λ΅κ·ΈμΈμ„ μν–‰
  - μΏ ν‚¤μ— μ €μ¥λ ν† ν°μ€ ν•„ν μ•”νΈν™”ν•μ—¬μ•Ό ν•λ‹¤.
- μ„μ„ λ°©μ‹μ κ²½μ° μ €μ¥ν•΄λ‘” ID/PASSWORDλ¥Ό POSTλ΅ μ „λ‹¬ν•μ—¬ λ΅κ·ΈμΈ ν•λ‹¤.
  - λλ” ID/PASSWORDλ¥Ό λ€μ‹ ν•  μ μλ” ν† ν° URL(GET) λ°©μ‹μΌλ΅ μ „λ‹¬ν•μ—¬ λ΅κ·ΈμΈ ν•λ‹¤.



##### λ‹¨λ§ ν”„λ΅κ·Έλ¨

---

- κΈ°μ—…μ© μ¤ν”„νΈμ›¨μ–΄μ κ²½μ° λ€λ¶€λ¶„ SSOλ¥Ό μ„ν• μΈμ¦ APIλ¥Ό μ κ³µν•λ‹¤.
- μ†ν”„νΈμ›¨μ–΄μ—μ„ μΈμ¦ κΈ°λ¥ μ»¤μ¤νΈλ§μ΄μ§•μ΄ μ „ν€ λμ§€ μ•μ„ κ²½μ° SSO μ—°λ™μ΄ λ¶κ°€λ¥ν•λ‹¤. 
  - λ‹¨λ§μ© μ†ν”„νΈμ›¨μ–΄ λ„μ…μ‹ RFPμ— ν•΄λ‹Ή SSO μ—°λ™ μ§€μ› λ‚΄μ© ν¬ν•¨ ν•„μ”



### Localhostμ—μ„ HTTPS μ μ©ν•κΈ°

---



#### mkert

---



> mkcert is a simple tool for making locally-trusted development certificates. It requires no configuration.



mkcertλ” λ΅μ»¬ κ°λ° μΈμ¦μ„λ¥Ό λ§λ“¤μ–΄μ£Όλ” λ„κµ¬μ΄λ‹¤.

μ΄λ” νΉλ³„ν• ν™κ²½μ„¤μ •μ„ ν•„μ”λ΅ ν•μ§€ μ•λ”λ‹¤.



mkcertλ¥Ό window ν™κ²½μ—μ„ μ‚¬μ©ν•λ ¤λ©΄ Chocolatelyλ¥Ό μ΄μ©ν•μ—¬ μ„¤μΉν•μ—¬μ•Ό ν•λ‹¤.



##### Chocolately

---

μ°μ„  Chocolatelyλ” Linuxμ—μ„μ apt, yumμ΄λ‚ macOSμ—μ„μ Homebrewμ²λΌ ν¨ν‚¤μ§€λ¥Ό μ„¤μΉ/μ—…λ°μ΄νΈ/μ κ±° λ“± κ΄€λ¦¬ν•λ” λ°μ— μ‚¬μ©λλ” Windowμ© ν”„λ΅κ·Έλ¨μ΄λ‹¤.



Chocolatelyλ¥Ό μ„¤μΉν•κΈ° μ„ν•΄μ„λ” powershellμ„ κ΄€λ¦¬μ κ¶ν•μ„ ν†µν•΄ μ‹¤ν–‰μ‹μΌ μ£Όμ–΄μ•Ό ν•λ‹¤.

κ·Έλƒ¥ μ‹¤ν–‰ν•κ² λλ©΄ μ„¤μΉκ²½λ΅μ λ³€κ²½ λ“±μ μ‘μ—…μ΄ μ”κµ¬λλ‹¤.



κ΄€λ¦¬μ κ¶ν•μΌλ΅ powershellμ„ μ‹¤ν–‰ν•μ€μΌλ©΄ λ‹¤μμ λ…λ Ήμ„ μ‹¤ν–‰ν•λ‹¤.

```cmd
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
```



μ΄ν›„ μ΅°κΈμ μ‹κ°„μ΄ μ§€λ‚λ©΄ Chocolately μ„¤μΉκ°€ μ™„λ£λλ‹¤.



##### μΈμ¦μ„ λ°κΈ‰

---

μ„μ™€ κ°™μ΄ Chocolatelyλ¥Ό μ„¤μΉν• ν›„ mkcertλ¥Ό μ„¤μΉν•λ‹¤.

```cmd
choco install mkcert
```



μ΄μ  mkcertλ¥Ό ν†µν•΄ λ„λ©”μΈ μΈμ¦μ„λ¥Ό λ°κΈ‰ν•λ‹¤.

```
 mkcert localhost
```



```
// κ²°κ³Ό
Created a new certificate valid for the following names π“
 - "localhost"

The certificate is at "./localhost.pem" and the key at "./localhost-key.pem" β…

It will expire on 20 August 2024 π—“
```



κ·Έ κ²°κ³Ό μ„μ™€ κ°™μ€ ν‚¤νμΌ localhost-key.pem κ·Έλ¦¬κ³  μΈμ¦νμΌ localhost.pemμ΄ μƒμ„±λλ‹¤.

μ΄ νμΌλ“¤μ€ μ„λ²„κ°€ μ‹¤ν–‰λλ” νμΌκ³Ό κ°™μ€ μ„μΉμ— μ„μΉμ‹ν‚¨λ‹¤.



#### https μ„λ²„μ— μ μ©

---

μ°μ„  http μ„λ²„μ™€ https μ„λ²„λ¥Ό μ μ©ν•  ν¬νΈλ¥Ό κµ¬λ¶„ν•΄ μ¤€λ‹¤.

```javascript
var http_port = process.env.HTTP_PORT;
var https_port = process.env.HTTPS_PORT;
```



μ΄ν›„ https μ„λ²„λ¥Ό λ§λ“¤ λ• μµμ…μ„ μµμ…μ„ μ„¤μ •ν•λ‹¤.

```javascript
var https_options = { key: fs.readFileSync(path.join(__dirname+'/localhost-key.pem')), cert: fs.readFileSync(path.join(__dirname+'/localhost.pem')) };
```



μ΄μ  λ‹¤μκ³Ό κ°™μ΄ https μ„λ²„λ¥Ό λ§λ“ λ‹¤.

```javascript
https.createServer(https_options, app).listen(https_port, function() {
    logger.info (`${https_port} μ„λ²„ κ°€λ™`);
});
```



μ „μ²΄μ μΈ μ½”λ“λ” λ‹¤μκ³Ό κ°™λ‹¤.

```javascript
var app = require( '../app');
var fs =require('fs');
var https = require('https')
var path = require('path')
var logger = require("../src/config/logger")

var http_port = process.env.HTTP_PORT;
var https_port = process.env.HTTPS_PORT;
var https_options = 
{ 
    key: fs.readFileSync(path.join(__dirname+'/localhost-key.pem')), 
    cert: fs.readFileSync(path.join(__dirname+'/localhost.pem')) 
};

app.listen (http_port, function() {
    logger.info (`${http_port} μ„λ²„ κ°€λ™`);
});

https.createServer(https_options, app).listen(https_port, function() {
    logger.info (`${https_port} μ„λ²„ κ°€λ™`);
});
```

